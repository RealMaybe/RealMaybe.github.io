<!-- GitHub Stats -->

<template>
    <section class="github-stats">
        <h2>ğŸ’» ğŸ“Š</h2>

        <div class="tips">{{ tip }}</div>
        <div class="github-stats-box">
            <div class="starts" v-for="img in Object.values(imgSrc)" :key="img">
                <img :src="img" />
            </div>
        </div>
    </section>
</template>

<script setup lang="ts">
import { ref } from "vue";
import { baseParam, buildGitHubStatsURL } from "@/plugin";

/**
 * æç¤ºè¯­
 */
const tips = [
    "GitHub å¡ç‰‡èµ° Vercel ç½‘ç»œï¼Œå¶å°”æŠ½é£è¯·å¤šåŒ…æ¶µ ğŸ˜‡",
    "ä¸‹é¢è¿™å‡ å¼ å›¾é  GitHub API æ´»ç€ï¼Œå¦‚æœæ¸²æŸ“å¤±è´¥å¤§æ¦‚æ˜¯è¢«å¢™äº†â€¦â€¦ ğŸ§±",
    "è¿™æ˜¯æˆ‘åœ¨ GitHub çš„æ—¥å¸¸æ•°æ®ï¼ŒåŠ è½½ä¸å‡ºï¼Ÿè¯•è¯•åˆ·æ–° or ç§‘å­¦ä¸Šç½‘å§ ğŸ”“",
] as const;

/**
 * éšæœºè·å–æç¤ºè¯­
 */
const tip = ref(tips[Math.floor(Math.random() * tips.length)]);

/**
 * è·å– GitHub ç»Ÿè®¡æ•°æ®
 */
const imgSrc = ref({
    topLangs: buildGitHubStatsURL({
        ...baseParam,
        layout: "compact",
    }, "top-langs"),
    stats: buildGitHubStatsURL({
        ...baseParam,
        show_icons: true,
        include_all_commits: true
    }),
});
</script>

<style scoped lang="less">
@import url("@style/public-page.less");

.github-stats {
    flex: 1 1 100% !important;

    .tips {
        margin-bottom: 1.5rem;
    }

    .github-stats-box {
        width: 100%;
        .flex-between-start();

        div.starts {
            width: 49%;

            img {
                width: 100%;
                transition: all 0.3s ease-in-out;

                &:hover {
                    .hover(-0.25rem);
                }
            }
        }

        @media (max-width: @tablet-breakpoint) {
            // .flex-between-start();

            div.starts {
                width: 49%;
            }
        }

        @media (max-width: @mobile-breakpoint) {
            flex-direction: column;

            div.starts {
                width: 100%;

                &:first-child {
                    margin-bottom: 1rem;
                }
            }
        }
    }
}
</style>
